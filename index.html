<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Malla Curricular - Ingeniería Mecánica UNLZ</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #fef9f9;
      margin: 0;
      padding: 2rem;
      color: #3b0a0a;
    }
    h1 {
      text-align: center;
      margin-bottom: 2rem;
      color: #660000;
    }
    .malla-container {
      display: flex;
      flex-direction: column;
      gap: 2rem;
    }
    .cuatrimestre {
      display: flex;
      gap: 1rem;
      align-items: flex-start;
    }
    .cuatrimestre > .cuatri-col {
      min-width: 200px;
      background-color: #fff0f0;
      border: 2px solid #dcbaba;
      border-radius: 10px;
      padding: 1rem;
      box-shadow: 2px 2px 6px rgba(160, 0, 0, 0.1);
      flex: 1;
    }
    .cuatri-title {
      color: #880e0e;
      text-align: center;
      font-size: 1rem;
      margin-bottom: 1rem;
      font-weight: bold;
    }
    .materia {
      padding: 0.5rem;
      border: 2px solid #dcbaba;
      border-radius: 6px;
      background-color: #fff;
      margin-bottom: 0.5rem;
      cursor: pointer;
      position: relative;
      transition: background-color 0.3s, border-color 0.3s, color 0.3s;
      font-size: 0.9rem;
    }
    .materia:hover {
      border-color: #b71c1c;
    }
    .materia.aprobada {
      background-color: #ffebee;
      border-color: #c62828;
      color: #4a0404;
    }
    .materia.bloqueada {
      background-color: #fbe9e9;
      color: #a1a1a1;
      border-style: dashed;
      cursor: not-allowed;
    }
    .materia .tooltip {
      visibility: hidden;
      background-color: #3b0a0a;
      color: #fff;
      text-align: center;
      border-radius: 6px;
      padding: 5px;
      position: absolute;
      z-index: 1;
      left: 105%;
      top: 50%;
      transform: translateY(-50%);
      opacity: 0;
      transition: opacity 0.3s;
      width: max-content;
      max-width: 200px;
    }
    .materia.bloqueada:hover .tooltip {
      visibility: visible;
      opacity: 1;
    }
  </style>
</head>
<body>
  <h1>Malla Curricular - Ingeniería Mecánica UNLZ</h1>
  <div class="malla-container" id="malla"></div>
  <script>
    const materias = {
      "Medios de representación gráfica II": ["Medios de representación gráfica I"],
      "Fundamentos de programación informática": ["Taller de informática general y aplicada"],
      "Higiene y seguridad en el trabajo I": ["Introduccion a la ingenieria"],
      "Introducción a la gestión del medio ambiente": ["Introduccion a la ingenieria"],
      "Economía I": ["Introduccion a la ingenieria"],
      "Matemática I": ["Introduccion a la ingenieria"],
      "Introducción a la gestión de la innovación y la tecnología": ["Inglés"],
      "Metrología": ["Medios de representación gráfica II"],
      "Legislación y ejercicio profesional": ["Higiene y seguridad en el trabajo I"],
      "Gestión de la calidad": ["Economía I"],
      "Economía II": ["Economía I"],
      "Física I": ["Matemática I"],
      "Matemática II": ["Matemática I"],
      "Fundamentos de la química": ["Introducción a la gestión del medio ambiente"],
      "Organizacion y gestion industrial": ["Gestión de la calidad", "Economía II"],
      "Física II": ["Física I"],
      "Termodinámica": ["Física I", "Fundamentos de la química"],
      "Cálculo I": ["Matemática II"],
      "Probabilidad y estadística": ["Matemática I"],
      "Estática y resistencia de los materiales": ["Física I", "Medios de representación gráfica II"],
      "Higiene y seguridad en el trabajo II": ["Medios de representación gráfica II", "Física II"],
      "Cálculo II": ["Cálculo I"],
      "Mecánica teórica": ["Cálculo I"],
      "Fundamentos de electrónica": ["Fundamentos de programación informática", "Física II"],
      "Mecánicas de los materiales": ["Estática y resistencia de los materiales"],
      "Ciencia y tecnología de los materiales": ["Estática y resistencia de los materiales", "Fundamentos de la química"],
      "Electrotecnia": ["Física II"],
      "Sistema y tecnología para la gestión ambiental": ["Fundamentos de la química", "Higiene y seguridad en el trabajo II"],
      "Mecanismos": ["Mecánica teórica"],
      "Formulacion gestion y evaluacion de proyectos": ["Organizacion y gestion industrial", "Cálculo I"],
      "Tecnologia del calor": ["Termodinámica"],
      "Tecnología mecánica": ["Mecánicas de los materiales"],
      "Mecánica de los fluidos": ["Termodinámica"],
      "Máquinas e instalaciones eléctricas": ["Electrotecnia"],
      "Modelado y dinámica de sistemas mecánicos": ["Mecánicas de los materiales", "Cálculo II"],
      "Automatización industrial": ["Electrotecnia", "Mecánica de los fluidos"],
      "Diseño de componentes de máquinas": ["Probabilidad y estadística", "Tecnología mecánica", "Modelado y dinámica de sistemas mecánicos", "Metrología"],
      "Maquinas termicas": ["Tecnologia del calor"],
      "Vigilancia tecnológica e inteligencia competitiva": ["Introducción a la gestión de la innovación y la tecnología", "Legislación y ejercicio profesional", "Tecnología mecánica"],
      "Instalaciones industriales y mecánicas de almacenaje": ["Mecánica de los fluidos"],
      "Sistema de control": ["Automatización industrial"],
      "Tecnologia del frio": ["Tecnologia del calor"],
      "Gestion e ingenieria del mantenimiento": ["Máquinas e instalaciones eléctricas", "Maquinas termicas", "Diseño de componentes de máquinas"],
      "Tecnología de la soldadura": ["Ciencia y tecnología de los materiales"],
      "Proyecto en ingeniería mecánica": ["Automatización industrial", "Formulacion gestion y evaluacion de proyectos", "Maquinas termicas", "Vigilancia tecnológica e inteligencia competitiva", "Instalaciones industriales y mecánicas de almacenaje"]
    };

    const estructura = [
      [
        ["Medios de representación gráfica I", "Introduccion a la ingenieria", "Inglés", "Taller de informática general y aplicada"],
        ["Medios de representación gráfica II", "Fundamentos de programación informática", "Higiene y seguridad en el trabajo I", "Introducción a la gestión del medio ambiente", "Economía I"]
      ],
      [
        ["Matemática I", "Introducción a la gestión de la innovación y la tecnología", "Metrología", "Legislación y ejercicio profesional", "Gestión de la calidad", "Economía II"],
        ["Física I", "Matemática II", "Fundamentos de la química", "Organizacion y gestion industrial"]
      ],
      [
        ["Física II", "Termodinámica", "Cálculo I", "Probabilidad y estadística"],
        ["Estática y resistencia de los materiales", "Higiene y seguridad en el trabajo II", "Cálculo II", "Mecánica teórica", "Fundamentos de electrónica"]
      ],
      [
        ["Mecánicas de los materiales", "Ciencia y tecnología de los materiales", "Electrotecnia", "Sistema y tecnología para la gestión ambiental", "Mecanismos", "Formulacion gestion y evaluacion de proyectos"],
        ["Tecnologia del calor", "Tecnología mecánica", "Mecánica de los fluidos", "Máquinas e instalaciones eléctricas", "Modelado y dinámica de sistemas mecánicos"]
      ],
      [
        ["Automatización industrial", "Diseño de componentes de máquinas", "Maquinas termicas", "Vigilancia tecnológica e inteligencia competitiva", "Instalaciones industriales y mecánicas de almacenaje"],
        ["Sistema de control", "Tecnologia del frio", "Gestion e ingenieria del mantenimiento", "Tecnología de la soldadura", "Proyecto en ingeniería mecánica"]
      ]
    ];

    const estado = JSON.parse(localStorage.getItem('materiasAprobadas') || '{}');

    function estaAprobada(nombre) {
      return estado[nombre] === true;
    }

    function requisitosCumplidos(materia) {
      return (materias[materia] || []).every(estaAprobada);
    }

    function guardarEstado() {
      localStorage.setItem('materiasAprobadas', JSON.stringify(estado));
    }

    function renderMalla() {
      const cont = document.getElementById('malla');
      cont.innerHTML = '';

      estructura.forEach((cuatrimestre, idx) => {
        const fila = document.createElement('div');
        fila.className = 'cuatrimestre';

        cuatrimestre.forEach((col, colIdx) => {
          const columna = document.createElement('div');
          columna.className = 'cuatri-col';

          const titulo = document.createElement('div');
          titulo.className = 'cuatri-title';
          titulo.textContent = `${idx + 1}° Año - ${colIdx === 0 ? '1er' : '2do'} cuatrimestre`;
          columna.appendChild(titulo);

          col.forEach(materia => {
            const divMateria = document.createElement('div');
            divMateria.className = 'materia';
            const aprobada = estaAprobada(materia);
            const bloqueada = !aprobada && !requisitosCumplidos(materia);

            divMateria.textContent = materia;
            if (aprobada) divMateria.classList.add('aprobada');
            else if (bloqueada) divMateria.classList.add('bloqueada');

            if (bloqueada) {
              const tooltip = document.createElement('div');
              tooltip.className = 'tooltip';
              const faltantes = materias[materia].filter(m => !estaAprobada(m));
              tooltip.textContent = 'Faltan: ' + faltantes.join(', ');
              divMateria.appendChild(tooltip);
            }

            divMateria.addEventListener('click', () => {
              if (!bloqueada) {
                estado[materia] = !aprobada;
                guardarEstado();
                renderMalla();
              }
            });

            columna.appendChild(divMateria);
          });

          fila.appendChild(columna);
        });

        cont.appendChild(fila);
      });
    }

    renderMalla();
  </script>
</body>
</html>

